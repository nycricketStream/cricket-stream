<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>NYC Eagles Broadcast Overlay</title>
<script src="https://js.pusher.com/8.2/pusher.min.js"></script>

<style>
html,body{
  margin:0;
  padding:0;
  width:1920px;
  height:1080px;
  background:transparent;
  overflow:hidden;
  font-family:'Segoe UI', Arial, sans-serif;
}

/* CONNECTION DOT */
#connectionDot{
  position:absolute;
  top:20px;
  left:20px;
  width:10px;
  height:10px;
  border-radius:50%;
  background:#facc15;
  z-index:9999;
}

/* LOWER THIRD */
#lowerThird{
  position:absolute;
  bottom:140px;
  left:160px;
  width:900px;
  height:260px;
  background:url('lowerthird_clean.png') no-repeat;
  background-size:contain;
  transform:translateX(-130%);
  opacity:0;
  transition:all .6s cubic-bezier(.22,.9,.3,1);
}

#ltTeam{
  position:absolute;
  top:18px;
  left:30px;
  font-size:22px;
  font-weight:900;
  letter-spacing:.15em;
  color:#ffffff;
}

#ltName{
  position:absolute;
  top:105px;
  left:40px;
  font-size:72px;
  font-weight:900;
  color:#ffffff;
}

#ltHand{
  position:absolute;
  top:195px;
  left:40px;
  font-size:26px;
  letter-spacing:.1em;
  color:#e5e7eb;
}

/* MOMENT STINGER */
#momentStinger{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.75);
  backdrop-filter:blur(4px);
  opacity:0;
  pointer-events:none;
  transition:opacity .3s ease;
  z-index:5000;
}

#momentText{
  font-size:200px;
  font-weight:900;
  letter-spacing:.1em;
  transform:scale(.6);
  transition:transform .4s cubic-bezier(.22,.9,.3,1);
}
</style>
</head>

<body>

<div id="connectionDot"></div>

<div id="lowerThird">
  <div id="ltTeam"></div>
  <div id="ltName"></div>
  <div id="ltHand"></div>
</div>

<div id="momentStinger">
  <div id="momentText"></div>
</div>

<script>

const PUSHER_KEY = "12fcceaea77e52cf3626";

const pusher = new Pusher(PUSHER_KEY,{
  cluster:'us2',
  forceTLS:true
});

const channel = pusher.subscribe('broadcast');

/* CONNECTION DOT */
const dot = document.getElementById('connectionDot');
pusher.connection.bind('connected',()=>dot.style.background='#22c55e');
pusher.connection.bind('connecting',()=>dot.style.background='#facc15');
pusher.connection.bind('disconnected',()=>dot.style.background='#ef4444');

/* MOMENTS - CORRECT COLOR LOGIC */
let momentTimer=null;

channel.bind('moment',data=>{
  if(!data || !data.type) return;

  if(momentTimer) clearTimeout(momentTimer);

  const stinger=document.getElementById('momentStinger');
  const text=document.getElementById('momentText');

  let raw = data.type.toString().trim().toUpperCase();

  let displayText="";
  let color="#facc15"; // default gold

  /* FOUR */
  if(raw==="4" || raw==="FOUR"){
    displayText="FOUR";
    color="#facc15"; // gold
  }

  /* SIX */
  else if(raw==="6" || raw==="SIX"){
    displayText="SIX";
    color="#22c55e"; // green
  }

  /* WICKET */
  else if(raw==="W" || raw==="WICKET"){
    displayText="WICKET";
    color="#ef4444"; // red
  }

  else{
    displayText=raw;
  }

  text.textContent=displayText;
  text.style.color=color;

  stinger.style.opacity='1';
  text.style.transform='scale(1)';

  momentTimer=setTimeout(()=>{
    stinger.style.opacity='0';
    text.style.transform='scale(.6)';
  },2500);
});

</script>

</body>
</html>
