<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cricket Broadcast Overlay</title>
<script src="https://js.pusher.com/8.2/pusher.min.js"></script>

<style>
html,body{
  margin:0;
  width:1920px;
  height:1080px;
  background:transparent;
  overflow:hidden;
  font-family:'Segoe UI', Arial, sans-serif;
}

/* CONNECTION DOT */
#connectionDot{
  position:absolute;
  top:20px;
  left:20px;
  width:12px;
  height:12px;
  border-radius:50%;
  background:#facc15;
  z-index:9999;
}

/* LOWER THIRD CONTAINER */
#lowerThird{
  position:absolute;
  bottom:120px;
  left:120px;
  width:1600px;
  height:360px;
  transform:translateX(-160%);
  opacity:0;
  transition:all .55s cubic-bezier(.22,.9,.3,1);
}

/* TEXT ALIGNMENT LINE */
:root{
  --textLeft:420px;
}

/* TEAM */
#ltTeam{
  position:absolute;
  top:70px;
  left:var(--textLeft);
  font-size:32px;
  font-weight:900;
  letter-spacing:.12em;
  color:white;
  text-shadow:0 2px 6px rgba(0,0,0,.7);
}

/* LABEL */
#ltLabel{
  position:absolute;
  top:120px;
  left:var(--textLeft);
  font-size:30px;
  font-weight:900;
  color:#111;
}

/* NAME */
#ltName{
  position:absolute;
  top:170px;
  left:var(--textLeft);
  font-size:92px;
  font-weight:900;
  color:white;
  white-space:nowrap;
  text-shadow:0 4px 12px rgba(0,0,0,.85);
}

/* ROLE */
#ltHand{
  position:absolute;
  top:280px;
  left:var(--textLeft);
  font-size:28px;
  letter-spacing:.14em;
  color:#e5e7eb;
}

/* HEADSHOT */
#playerImage{
  position:absolute;
  top:70px;
  left:140px;
  width:230px;
  height:230px;
  border-radius:50%;
  object-fit:cover;
  display:none;
}

/* SCORE */
#manualScore{
  position:absolute;
  bottom:40px;
  left:50%;
  transform:translateX(-50%);
  display:none;
}

#scoreText{
  background:#0f172a;
  padding:20px 60px;
  border-radius:10px;
  font-size:40px;
  font-weight:900;
  letter-spacing:.1em;
  color:#fff;
}

/* MOMENT */
#momentStinger{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.75);
  opacity:0;
  pointer-events:none;
  transition:opacity .3s ease;
  z-index:5000;
}

#momentText{
  font-size:240px;
  font-weight:900;
  letter-spacing:.1em;
  transform:scale(.6);
  transition:transform .4s cubic-bezier(.22,.9,.3,1);
}
</style>
</head>

<body>

<div id="connectionDot"></div>

<div id="lowerThird">

<svg width="1600" height="360" viewBox="0 0 1600 360">

  <defs>

    <!-- PANEL GRADIENT -->
    <linearGradient id="panelGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#0b1f3a"/>
      <stop offset="100%" stop-color="#081226"/>
    </linearGradient>

    <!-- GOLD -->
    <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#fde047"/>
      <stop offset="50%" stop-color="#facc15"/>
      <stop offset="100%" stop-color="#b45309"/>
    </linearGradient>

    <!-- BLUE TAB -->
    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#2563eb"/>
      <stop offset="100%" stop-color="#1e3a8a"/>
    </linearGradient>

  </defs>

  <!-- MAIN PANEL -->
  <polygon points="420,60 1500,60 1550,320 380,320"
           fill="url(#panelGrad)"
           stroke="#2563eb"
           stroke-width="3"/>

  <!-- BOTTOM ACCENT -->
  <rect x="380" y="312" width="1170" height="6"
        fill="#3b82f6"/>

  <!-- GOLD STRIP -->
  <polygon points="420,120 1450,120 1410,160 420,160"
           fill="url(#goldGrad)"/>

  <!-- TEAM TAB -->
  <polygon points="420,60 720,60 700,120 420,120"
           fill="url(#blueGrad)"/>

  <!-- HEADSHOT RING -->
  <circle cx="260" cy="190" r="125"
          fill="none"
          stroke="url(#goldGrad)"
          stroke-width="18"/>

</svg>

<img id="playerImage">

<div id="ltTeam"></div>
<div id="ltLabel">NEW BATSMAN</div>
<div id="ltName"></div>
<div id="ltHand"></div>

</div>

<div id="manualScore">
  <div id="scoreText"></div>
</div>

<div id="momentStinger">
  <div id="momentText"></div>
</div>

<script>
const PUSHER_KEY="12fcceaea77e52cf3626";
const pusher=new Pusher(PUSHER_KEY,{cluster:'us2'});
const channel=pusher.subscribe('broadcast');

const dot=document.getElementById('connectionDot');
pusher.connection.bind('connected',()=>dot.style.background='#22c55e');
pusher.connection.bind('connecting',()=>dot.style.background='#facc15');
pusher.connection.bind('disconnected',()=>dot.style.background='#ef4444');

const lowerThird=document.getElementById('lowerThird');
const nameEl=document.getElementById('ltName');

/* Auto scale long names */
function autoScaleName(){
  nameEl.style.fontSize="92px";
  while(nameEl.scrollWidth>1000){
    let size=parseInt(window.getComputedStyle(nameEl).fontSize);
    nameEl.style.fontSize=(size-2)+"px";
  }
}

channel.bind('player',data=>{
  if(!data)return;

  document.getElementById('ltTeam').textContent=data.team||'';
  nameEl.textContent=data.name||'';
  document.getElementById('ltHand').textContent=data.hand||'';

  autoScaleName();

  if(data.image){
    const img=document.getElementById('playerImage');
    img.src=data.image;
    img.style.display='block';
  }

  lowerThird.style.opacity='1';
  lowerThird.style.transform='translateX(0)';

  setTimeout(()=>{
    lowerThird.style.opacity='0';
    lowerThird.style.transform='translateX(-160%)';
  },7000);
});

/* MOMENT */
channel.bind('moment',data=>{
  if(!data||!data.type)return;
  const stinger=document.getElementById('momentStinger');
  const text=document.getElementById('momentText');

  let color='#facc15';
  if(data.type==='SIX')color='#22c55e';
  if(data.type==='WICKET')color='#ef4444';

  text.textContent=data.type;
  text.style.color=color;

  stinger.style.opacity='1';
  text.style.transform='scale(1)';

  setTimeout(()=>{
    stinger.style.opacity='0';
    text.style.transform='scale(.6)';
  },2500);
});
</script>

</body>
</html>
