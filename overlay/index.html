<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Broadcast Overlay</title>
<script src="https://js.pusher.com/8.2/pusher.min.js"></script>

<style>
body{
  margin:0;
  background:transparent;
  overflow:hidden;
  font-family:'Segoe UI','Montserrat',Arial,sans-serif;
}

/* SAFE ZONE */
.safe-zone{
  position:fixed;
  inset:4%;
  pointer-events:none;
}

/* LOWER THIRD */
#lowerThird{
  position:absolute;
  bottom:0;
  left:50%;
  transform:translate(-50%,120%);
  transition:transform .7s cubic-bezier(.22,.9,.3,1),opacity .5s;
  opacity:0;
}

.lt-panel{
  background:linear-gradient(180deg,#0f1f45,#000814);
  border-radius:18px;
  padding:26px 46px;
  min-width:650px;
  box-shadow:0 30px 70px rgba(0,0,0,.95);
  border:1px solid rgba(255,255,255,.15);
  color:#fff;
  position:relative;
  overflow:hidden;
}

.lt-content{
  display:flex;
  align-items:center;
  gap:28px;
}

#ltImage{
  width:110px;
  height:110px;
  object-fit:cover;
  border-radius:14px;
  border:3px solid rgba(255,255,255,.25);
  box-shadow:0 12px 28px rgba(0,0,0,.7);
  display:none;
}

.lt-team{
  font-size:14px;
  font-weight:800;
  letter-spacing:.14em;
  color:#7dd3fc;
  margin-bottom:6px;
  text-transform:uppercase;
}

.lt-tag{
  background:linear-gradient(180deg,#fbbf24,#f59e0b);
  color:#000;
  font-weight:900;
  font-size:13px;
  padding:5px 16px;
  border-radius:6px;
  display:inline-block;
  margin-bottom:10px;
}

.lt-name{
  font-size:42px;
  font-weight:900;
  letter-spacing:.05em;
  text-transform:uppercase;
}

.lt-hand{
  font-size:15px;
  color:#cbd5e1;
  margin-top:6px;
  letter-spacing:.08em;
}

/* SCORE PANEL */
#manualScore{
  position:absolute;
  bottom:0;
  left:50%;
  transform:translateX(-50%);
  display:none;
}

.score-panel{
  background:linear-gradient(180deg,#0f1f45,#000814);
  padding:18px 40px;
  border-radius:14px;
  font-weight:900;
  font-size:24px;
  letter-spacing:.08em;
  color:#fff;
  box-shadow:0 18px 48px rgba(0,0,0,.9);
}

/* SPONSOR */
#sponsorBox{
  position:absolute;
  top:0;
  right:0;
  width:260px;
  height:90px;
  display:none;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.65);
  border-radius:14px;
  overflow:hidden;
}

#sponsorBox img{
  max-width:90%;
  max-height:90%;
}

/* MOMENT STINGER */
#momentStinger{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.75);
  backdrop-filter:blur(6px);
  opacity:0;
  pointer-events:none;
  transition:opacity .3s ease;
  z-index:15000;
}

#momentText{
  font-size:130px;
  font-weight:900;
  letter-spacing:.1em;
  text-transform:uppercase;
  transform:scale(.6);
  transition:transform .4s cubic-bezier(.22,.9,.3,1);
}

/* CONNECTION DOT */
#connectionDot{
  position:fixed;
  top:14px;
  left:14px;
  width:10px;
  height:10px;
  border-radius:50%;
  background:#facc15;
  z-index:20000;
}
</style>
</head>
<body>

<div class="safe-zone">

  <!-- LOWER THIRD -->
  <div id="lowerThird">
    <div class="lt-panel">
      <div class="lt-content">
        <img id="ltImage">
        <div>
          <div class="lt-team" id="ltTeam"></div>
          <div class="lt-tag">NEW BATSMAN</div>
          <div class="lt-name" id="ltName"></div>
          <div class="lt-hand" id="ltHand"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- SCORE -->
  <div id="manualScore">
    <div class="score-panel" id="scoreText"></div>
  </div>

  <!-- SPONSOR -->
  <div id="sponsorBox"></div>

</div>

<!-- MOMENT -->
<div id="momentStinger">
  <div id="momentText"></div>
</div>

<div id="connectionDot"></div>

<script>
const PUSHER_KEY = "12fcceaea77e52cf3626";
const pusher = new Pusher(PUSHER_KEY,{cluster:'us2'});
const channel = pusher.subscribe('broadcast');

const dot = document.getElementById('connectionDot');
const lowerThird = document.getElementById('lowerThird');
const ltImage = document.getElementById('ltImage');
const sponsorBox = document.getElementById('sponsorBox');
let sponsorInterval;

/* CONNECTION STATUS */
pusher.connection.bind('connected',()=>dot.style.background='#22c55e');
pusher.connection.bind('connecting',()=>dot.style.background='#facc15');
pusher.connection.bind('disconnected',()=>dot.style.background='#ef4444');

/* PLAYER LOWER THIRD */
channel.bind('player',data=>{
  if(!data) return;

  ltTeam.textContent = data.team || '';
  ltName.textContent = data.name || '';
  ltHand.textContent = data.hand || '';

  if(data.image){
    ltImage.style.display='block';
    ltImage.src = data.image + '?t=' + Date.now();
  } else {
    ltImage.style.display='none';
  }

  lowerThird.style.opacity='1';
  lowerThird.style.transform='translate(-50%,0)';

  setTimeout(()=>{
    lowerThird.style.opacity='0';
    lowerThird.style.transform='translate(-50%,120%)';
  },7000);
});

/* MANUAL SCORE */
channel.bind('manualScore',data=>{
  manualScore.style.display='block';
  scoreText.textContent = `${data.score||''} | ${data.overs||''}`;
});

/* AUTO SCORE ENABLE */
channel.bind('score',data=>{
  if(data.auto){
    manualScore.style.display='none';
  }
});

/* SPONSORS */
channel.bind('sponsor',data=>{
  if(!data.enabled){
    sponsorBox.style.display='none';
    clearInterval(sponsorInterval);
    return;
  }

  sponsorBox.style.display='flex';
  const list=data.list||[];
  if(!list.length) return;

  let i=0;
  sponsorBox.innerHTML=`<img src="${list[0]}">`;

  clearInterval(sponsorInterval);
  sponsorInterval=setInterval(()=>{
    i=(i+1)%list.length;
    sponsorBox.innerHTML=`<img src="${list[i]}?t=${Date.now()}">`;
  },(data.interval||8)*1000);
});

/* MOMENT */
channel.bind('moment',data=>{
  if(!data || !data.type) return;

  const stinger=document.getElementById('momentStinger');
  const text=document.getElementById('momentText');

  let color='#fbbf24';
  if(data.type==='SIX') color='#22c55e';
  if(data.type==='WICKET') color='#ef4444';

  text.textContent=data.type;
  text.style.color=color;

  stinger.style.opacity='1';
  text.style.transform='scale(1)';

  setTimeout(()=>{
    stinger.style.opacity='0';
    text.style.transform='scale(.6)';
  },2500);
});
</script>

</body>
</html>
