<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Clean Network Overlay</title>
<script src="https://js.pusher.com/8.2/pusher.min.js"></script>

<style>
body{
  margin:0;
  background:transparent;
  overflow:hidden;
  font-family:'Segoe UI',Arial,sans-serif;
}

/* LOWER THIRD */
#lowerThird{
  position:absolute;
  bottom:60px;
  left:60px;
  transform:translateX(-120%);
  opacity:0;
  transition:transform .7s cubic-bezier(.22,.9,.3,1), opacity .6s ease;
}

.lt-panel{
  position:relative;
  min-width:880px;
  padding:32px 60px 32px 130px;
  background:linear-gradient(180deg,#1e293b,#0f172a);
  clip-path:polygon(0 0, 97% 0, 100% 100%, 0% 100%);
  box-shadow:0 25px 60px rgba(0,0,0,.65);
  color:#fff;
}

/* Circular Headshot */
#ltImage{
  position:absolute;
  top:-35px;
  left:-35px;
  width:110px;
  height:110px;
  border-radius:50%;
  object-fit:cover;
  border:5px solid #1e40af;
  display:none;
  background:#000;
  transition:all .4s ease;
}

/* Team Strip */
.lt-team{
  display:inline-block;
  padding:10px 22px;
  font-weight:800;
  letter-spacing:.12em;
  font-size:16px;
  text-transform:uppercase;
  background:#1e40af;
  transition:background .4s ease;
}

/* Yellow Tag */
.lt-tag{
  background:#facc15;
  color:#000;
  font-weight:900;
  padding:10px 26px;
  margin-top:12px;
  display:inline-block;
  font-size:16px;
}

/* Name */
.lt-name{
  font-size:62px;
  font-weight:900;
  margin-top:18px;
  line-height:1;
}

/* Role */
.lt-hand{
  font-size:20px;
  margin-top:10px;
  color:#cbd5e1;
  letter-spacing:.08em;
}

/* Animated Underline */
#nameUnderline{
  height:4px;
  width:0;
  background:#facc15;
  margin-top:12px;
  transition:width .8s ease;
}
</style>
</head>

<body>

<div id="lowerThird">
  <div class="lt-panel">
    <img id="ltImage">
    <div class="lt-team" id="ltTeam"></div>
    <div class="lt-tag">NEW BATSMAN</div>
    <div class="lt-name" id="ltName"></div>
    <div id="nameUnderline"></div>
    <div class="lt-hand" id="ltHand"></div>
  </div>
</div>

<script>
const PUSHER_KEY = "12fcceaea77e52cf3626";
const pusher = new Pusher(PUSHER_KEY,{cluster:'us2'});
const channel = pusher.subscribe('broadcast');

const lowerThird = document.getElementById('lowerThird');
const ltImage = document.getElementById('ltImage');
const ltTeam = document.getElementById('ltTeam');
const ltName = document.getElementById('ltName');
const ltHand = document.getElementById('ltHand');
const underline = document.getElementById('nameUnderline');

/* Auto Team Color Detection */
function getTeamColor(team){
  if(!team) return "#1e40af";

  const map = {
    "NYC Eagles":"#1e40af",
    "Manhattan CC":"#b91c1c",
    "Brooklyn CC":"#065f46",
    "Default":"#1e40af"
  };

  return map[team] || "#1e40af";
}

/* Player Event */
channel.bind('player', data => {
  if(!data) return;

  ltTeam.textContent = data.team || '';
  ltName.textContent = data.name || '';
  ltHand.textContent = data.hand || '';

  /* Apply team color */
  const teamColor = getTeamColor(data.team);
  ltTeam.style.background = teamColor;
  ltImage.style.borderColor = teamColor;

  /* Headshot */
  if(data.image && data.image.trim() !== ''){
    ltImage.style.display = 'block';
    ltImage.src = data.image + '?t=' + Date.now();
  } else {
    ltImage.style.display = 'none';
  }

  /* Slide in from left */
  lowerThird.style.opacity='1';
  lowerThird.style.transform='translateX(0)';

  /* Animate underline */
  underline.style.width = "0";
  setTimeout(()=>{
    underline.style.width = "100%";
  },300);

  /* Smooth fade out */
  setTimeout(()=>{
    lowerThird.style.opacity='0';
    lowerThird.style.transform='translateX(-120%)';
    underline.style.width = "0";
  },7000);
});
</script>

</body>
</html>
