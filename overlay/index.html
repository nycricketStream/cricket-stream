<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Broadcast Overlay</title>
<script src="https://js.pusher.com/8.2/pusher.min.js"></script>

<style>
body{
  margin:0;
  background:transparent;
  overflow:hidden;
  font-family:'Segoe UI',Arial,sans-serif;
}

/* ================= CONNECTION DOT ================= */

#connectionDot{
  position:fixed;
  top:14px;
  left:14px;
  width:8px;
  height:8px;
  border-radius:50%;
  background:#facc15;
  z-index:20000;
}

/* ================= LOWER THIRD ================= */

#lowerThird{
  position:absolute;
  bottom:90px;
  left:90px;
  transform:translateX(-120%);
  opacity:0;
  transition:all .7s cubic-bezier(.22,.9,.3,1);
}

/* Main container width */
.lt-container{
  position:relative;
  width:760px;
}

/* Base shape */
.lt-base{
  position:relative;
  background:linear-gradient(90deg,#0d1f4a 0%, #101827 100%);
  padding:28px 40px 22px 120px;
  clip-path:polygon(0 0, 96% 0, 100% 100%, 0% 100%);
  box-shadow:0 20px 50px rgba(0,0,0,.6);
}

/* Subtle bottom blue line */
.lt-base::after{
  content:'';
  position:absolute;
  bottom:0;
  left:0;
  width:100%;
  height:2px;
  background:#2563eb;
}

/* Headshot */
#ltImage{
  position:absolute;
  top:-28px;
  left:-28px;
  width:95px;
  height:95px;
  border-radius:50%;
  border:5px solid #facc15;
  object-fit:cover;
  display:none;
  background:#000;
}

/* Team tab */
.lt-team{
  position:absolute;
  top:-16px;
  left:120px;
  background:#1e40af;
  padding:6px 18px;
  font-size:13px;
  font-weight:800;
  letter-spacing:.12em;
  text-transform:uppercase;
  clip-path:polygon(0 0, 100% 0, 94% 100%, 0% 100%);
}

/* Gold strip */
.lt-tag{
  margin-top:4px;
  background:linear-gradient(90deg,#facc15,#f59e0b);
  padding:6px 20px;
  font-weight:900;
  font-size:14px;
  display:inline-block;
  clip-path:polygon(0 0, 100% 0, 96% 100%, 0% 100%);
}

/* Player name */
.lt-name{
  font-size:44px;
  font-weight:900;
  margin-top:12px;
  line-height:1;
  color:#fff;
}

/* Role */
.lt-hand{
  font-size:15px;
  margin-top:6px;
  color:#cbd5e1;
  letter-spacing:.06em;
}
</style>
</head>

<body>

<div id="connectionDot"></div>

<div id="lowerThird">
  <div class="lt-container">
    <div class="lt-base">
      <img id="ltImage">
      <div class="lt-team" id="ltTeam"></div>
      <div class="lt-tag">NEW BATSMAN</div>
      <div class="lt-name" id="ltName"></div>
      <div class="lt-hand" id="ltHand"></div>
    </div>
  </div>
</div>

<script>
const PUSHER_KEY = "12fcceaea77e52cf3626";
const pusher = new Pusher(PUSHER_KEY,{cluster:'us2'});
const channel = pusher.subscribe('broadcast');

/* CONNECTION DOT */
const dot = document.getElementById('connectionDot');
function setStatus(state){
  if(state==='connected') dot.style.background='#22c55e';
  else if(state==='connecting') dot.style.background='#facc15';
  else dot.style.background='#ef4444';
}
pusher.connection.bind('connected',()=>setStatus('connected'));
pusher.connection.bind('connecting',()=>setStatus('connecting'));
pusher.connection.bind('disconnected',()=>setStatus('disconnected'));

/* LOWER THIRD */
const lowerThird = document.getElementById('lowerThird');
const ltImage = document.getElementById('ltImage');
const ltTeam = document.getElementById('ltTeam');
const ltName = document.getElementById('ltName');
const ltHand = document.getElementById('ltHand');

channel.bind('player', data => {
  if(!data) return;

  ltTeam.textContent = data.team || '';
  ltName.textContent = data.name || '';
  ltHand.textContent = data.hand || '';

  if(data.image && data.image.trim() !== ''){
    ltImage.style.display='block';
    ltImage.src = data.image + '?t=' + Date.now();
  } else {
    ltImage.style.display='none';
  }

  lowerThird.style.opacity='1';
  lowerThird.style.transform='translateX(0)';

  setTimeout(()=>{
    lowerThird.style.opacity='0';
    lowerThird.style.transform='translateX(-120%)';
  },7000);
});
</script>

</body>
</html>
