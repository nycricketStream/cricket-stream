<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Cricket Broadcast Dashboard</title>
<script src="https://js.pusher.com/8.2/pusher.min.js"></script>
<style>
body{margin:0;font-family:Segoe UI,Arial;background:#060b18;color:#e5e7eb;display:flex}
.sidebar{width:260px;background:linear-gradient(180deg,#081a3a,#030712);height:100vh;padding:18px 14px;border-right:1px solid rgba(59,130,246,.25)}
.sidebar h2{margin-top:0;color:#60a5fa}
.tab-btn{width:100%;padding:12px;margin-bottom:12px;border:none;border-radius:10px;background:#0a1226;color:white;text-align:left;cursor:pointer}
.tab-btn.active{background:#2563eb}
.main{flex:1;padding:28px}
.tab{display:none;background:#0c1426;padding:26px;border-radius:16px}
.tab.active{display:block}
input,textarea,select{width:100%;padding:10px;margin-bottom:14px;border-radius:8px;border:1px solid #1f2937;background:#020617;color:#fff}
button{width:100%;padding:10px;border:none;border-radius:8px;background:#1d4ed8;color:white;cursor:pointer;margin-top:8px}
#logPanel{position:fixed;bottom:10px;left:10px;width:360px;max-height:240px;overflow:auto;background:rgba(0,0,0,.9);color:#22c55e;font-family:monospace;font-size:11px;padding:8px;border-radius:6px;display:none;z-index:99999}
#logToggle{position:fixed;bottom:10px;right:10px;padding:6px 12px;background:#111827;color:#22c55e;border:none;border-radius:6px}
</style>
</head>
<body>

<div class="sidebar">
<h2>Broadcast</h2>
<button class="tab-btn active" onclick="showTab(event,'match')">Match Setup</button>
<button class="tab-btn" onclick="showTab(event,'cricclubs')">CricClubs</button>
<button class="tab-btn" onclick="showTab(event,'scoreinfo')">Manual Score</button>
<button class="tab-btn" onclick="showTab(event,'player')">Player</button>
<button class="tab-btn" onclick="showTab(event,'sponsors')">Sponsors</button>
<button class="tab-btn" onclick="showTab(event,'moments')">Moments</button>
</div>

<div class="main">

<div id="match" class="tab active">
<h3>Match Setup</h3>
Team A<input id="teamA">
Team A Players<textarea id="teamAPlayers"></textarea>
Team B<input id="teamB">
Team B Players<textarea id="teamBPlayers"></textarea>
Batting<select id="batting"></select>
Innings<select id="innings"><option>1st</option><option>2nd</option></select>
<button onclick="send('match',{teamA:teamA.value,teamB:teamB.value,batting:batting.value,innings:innings.value})">Update Match</button>
</div>

<div id="cricclubs" class="tab">
<h3>CricClubs</h3>
<label><input type="checkbox" id="useCricclubs" checked> Enable CricClubs</label>
Embed URL<input id="embedURL">
<button onclick="send('score',{auto:true,url:embedURL.value})">Update CricClubs</button>
</div>

<div id="scoreinfo" class="tab">
<h3>Manual Score</h3>
Score<input id="manualScore">
Overs<input id="manualOvers">
<button onclick="send('manualScore',{score:manualScore.value,overs:manualOvers.value})">Send Manual Score</button>
</div>

<div id="player" class="tab">
<h3>Player</h3>
Player<select id="playerSelect"></select>
Hand<select id="hand"><option>Right-Hand</option><option>Left-Hand</option></select>
<button onclick="send('player',{team:batting.value,name:playerSelect.value,hand:hand.value})">Show Player</button>
</div>

<div id="sponsors" class="tab">
<h3>Sponsors</h3>
<textarea id="sponsorList" placeholder="One image URL per line"></textarea>
<button onclick="send('sponsor',{enabled:true,list:sponsorList.value.split('\n'),interval:8})">Update Sponsors</button>
</div>

<div id="moments" class="tab">
<h3>Moments</h3>
<button onclick="send('moment',{type:'FOUR'})">FOUR</button>
<button onclick="send('moment',{type:'SIX'})">SIX</button>
<button onclick="send('moment',{type:'WICKET'})">WICKET</button>
</div>

</div>

<div id="logPanel"></div>
<button id="logToggle">LOG</button>

<script>
const PUSHER_KEY=window.PUSHER_KEY||'';
const pusher=new Pusher(PUSHER_KEY,{cluster:'us2'});
const channel=pusher.subscribe('broadcast');

function log(m){const t=new Date().toLocaleTimeString();logPanel.innerHTML+=`[${t}] ${m}<br>`;}
logToggle.onclick=()=>{logPanel.style.display=logPanel.style.display==='none'?'block':'none';};
window.addEventListener('keydown',e=>{if(e.key&&e.key.toLowerCase()==='l'){logToggle.click();}});

pusher.connection.bind('connected',()=>log('CONNECTED'));
pusher.connection.bind('disconnected',()=>log('DISCONNECTED'));

function send(e,d){log('SEND â†’ '+e);channel.trigger('client-'+e,d);}

function showTab(evt,id){
 document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
 document.getElementById(id).classList.add('active');
 document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
 if(evt) evt.target.classList.add('active');
}
</script>
</body>
</html>