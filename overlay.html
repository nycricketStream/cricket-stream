
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>
<style>
body{margin:0;background:transparent;font-family:Arial}

/* Manual Scoreboard */
#scoreboard{
position:absolute;
bottom:20px;
left:50%;
transform:translateX(-50%);
width:85%;
height:100px;
background:linear-gradient(#222,#000);
border-top:4px solid red;
border-radius:12px;
color:white;
display:none;
flex-direction:column;
justify-content:center;
align-items:center;
}

/* CricClubs */
#cric{
position:absolute;
bottom:20px;
left:50%;
transform:translateX(-50%);
width:85%;
height:100px;
display:none;
border-radius:12px;
overflow:hidden;
}

/* Player */
#player{
position:absolute;
bottom:140px;
left:40px;
background:#111;
padding:10px;
border-left:6px solid red;
display:none;
align-items:center;
border-radius:8px;
}
#player img{
height:70px;
margin-right:10px;
border-radius:50%;
}

/* Sponsor */
#sponsor{
position:absolute;
top:0;
width:100%;
background:#0046BE;
color:white;
padding:6px;
text-align:center;
}
</style>
</head>
<body>

<div id="scoreboard"></div>

<div id="cric">
<iframe id="cricFrame" style="width:100%;height:100%;border:none"></iframe>
</div>

<div id="player">
<img id="pimg">
<div>
<div id="pname"></div>
<div id="phand"></div>
</div>
</div>

<div id="sponsor"></div>

<script>
const pusher=new Pusher("40ce89af9ae13d222f51",{cluster:"us2"});
const channel=pusher.subscribe("broadcast");

let sponsorTimer=null,index=0;
let playerTimer=null;

channel.bind("update",data=>{

/* SCORE */
if(data.showCric){
cric.style.display="block";
scoreboard.style.display="none";
cricFrame.src=data.embedURL;
}else{
cric.style.display="none";
scoreboard.style.display="flex";
scoreboard.innerHTML=`
<div>${data.tournament}</div>
<div>${data.teamA} ${data.score} ${data.teamB}</div>
<div>Overs ${data.overs} | RRR ${data.rrr}</div>`;
}

/* PLAYER */
if(data.player?.name){
player.style.display="flex";
pname.innerText=data.player.name;
phand.innerText=data.player.hand;
pimg.src=data.player.img;

player.style.borderLeftColor=
data.player.team==="A"?data.colorA:data.colorB;

clearTimeout(playerTimer);
playerTimer=setTimeout(()=>player.style.display="none",6000);
}

/* SPONSORS */
if(data.sponsors?.length){
clearInterval(sponsorTimer);
index=0;
function rotate(){
sponsor.innerText=data.sponsors[index];
index=(index+1)%data.sponsors.length;
}
rotate();
if(data.rotate){
sponsorTimer=setInterval(rotate,5000);
}
}

});
</script>

</body>
</html>
